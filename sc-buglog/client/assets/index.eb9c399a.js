import{r as t,c as e,o as a,a as s,b as o,F as n,d as l,S as r,C as i,e as c,f as u,g as d,p as g,h as p,w as m,t as b,i as v,j as f,$ as y,k as h,l as B,v as w,u as _,m as x,n as I,q as A,s as k}from"./vendor.c5379c6f.js";const T=t({user:{},account:{},bugs:[],activeBug:{},notes:{}});const N={name:"App",setup:()=>({appState:e((()=>T))})},E={class:"row"},S={class:"col-12 p-0"},D={class:"row"};N.render=function(t,e,r,i,c,u){const d=l("Navbar"),g=l("router-view");return a(),s(n,null,[o("header",E,[o("div",S,[o(d)])]),o("main",D,[o(g)])],64)};class C{static async confirm(t="Are you sure?",e="You won't be able to revert this!",a="warning",s="Yes, delete it!"){try{return!!(await r.fire({title:t,text:e,icon:a,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:s})).isConfirmed}catch(o){return!1}}static toast(t="Warning!",e="warning",a="top-end",s=3e3,o=!0){r.fire({title:t,icon:e,position:a,timer:s,timerProgressBar:o,toast:!0,showConfirmButton:!1})}}const O=window.location.origin.includes("localhost"),P=O?"http://localhost:3000":"",j=i.create({baseURL:P,timeout:8e3});const L=new class{async getAllBugs(t={}){const e=await j.get("api/bugs"+function(t){let e="?";for(const a in t)e+=a+"="+t[a]+"&";return e=e.substring(0,e.length-1),e}(t));T.bugs=e.data}async showOpen(){this.getAllBugs(),await j.get("api/bugs"),T.bugs=T.bugs.filter((t=>!0!==t.closed))}async showClosed(){this.getAllBugs(),await j.get("api/bugs"),T.bugs=T.bugs.filter((t=>!0===t.closed))}async getBugById(t){const e=await j.get("api/bugs/"+t);T.activeBug=e.data}async getNotesByBugId(t){const e=await j.get("api/bugs/"+t+"/notes");T.notes[t]=e.data}async createBug(t){const e=await j.post("api/bugs",t);return this.getAllBugs(),e.data.id}async editBug(t,e){const a=await j.put("api/bugs/"+e,t);return this.getBugById(e),this.getNotesByBugId(e),a.data.bugId}async closeBug(t){const e=await j.delete("api/bugs/"+t);return this.getBugById(t),this.getNotesByBugId(t),e.data.bugId}async setActiveBug(t){const e=await j.get("api/bugs/"+t);T.activeBug=e.data}};let U;const R={},M=function(t,e){if(!e||0===e.length)return t();if(void 0===U){const t=document.createElement("link").relList;U=t&&t.supports&&t.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(e.map((t=>{if(t in R)return;R[t]=!0;const e=t.endsWith(".css"),a=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${a}`))return;const s=document.createElement("link");return s.rel=e?"stylesheet":U,e||(s.as="script",s.crossOrigin=""),s.href=t,document.head.appendChild(s),e?new Promise(((t,e)=>{s.addEventListener("load",t),s.addEventListener("error",e)})):void 0}))).then((()=>t()))};function V(t){return()=>function(t){switch(t){case"./pages/AboutPage.vue":return M((()=>import("./AboutPage.af441a16.js")),["/assets/AboutPage.af441a16.js","/assets/vendor.c5379c6f.js"]);case"./pages/AccountPage.vue":return M((()=>import("./AccountPage.5db09007.js")),["/assets/AccountPage.5db09007.js","/assets/AccountPage.d34162db.css","/assets/vendor.c5379c6f.js"]);case"./pages/BugDetailsPage.vue":return M((()=>import("./BugDetailsPage.d01c3f1b.js")),["/assets/BugDetailsPage.d01c3f1b.js","/assets/BugDetailsPage.c61b6d20.css","/assets/vendor.c5379c6f.js"]);case"./pages/HomePage.vue":return M((()=>import("./HomePage.be38db02.js")),["/assets/HomePage.be38db02.js","/assets/vendor.c5379c6f.js"]);default:return Promise.reject(new Error("Unknown variable dynamic import: "+t))}}(`./pages/${t}.vue`)}const H=[{path:"/",name:"Home",component:V("HomePage")},{path:"/about",name:"About",component:V("AboutPage")},{path:"/account",name:"Account",component:V("AccountPage"),beforeEnter:d},{path:"/bugs/:bugId",name:"BugDetails",component:V("BugDetailsPage"),beforeEnter:d}],q=c({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:u(),routes:H});const z={props:{bug:{type:Object,required:!0}},setup(t){const a=e((()=>T.notes[t.bug.id]||[]));return m((async()=>{try{await L.getNotesByBugId(t.bug.id)}catch(e){C.toast(e,"error")}})),{notes:a,updatedDate:e((()=>{const e=new Date(t.bug.updatedAt);return new Intl.DateTimeFormat("en-US").format(e)})),async setActiveBug(){try{await L.setActiveBug(t.bug.id),q.push({name:"BugDetails",params:{bugId:t.bug.id}})}catch(e){C.toast(e,"error")}}}}},$=f("data-v-6a6b2fa8");g("data-v-6a6b2fa8");const Y={class:"row shadow border border-primary mb-2 mx-3"},W={class:"col-12 col-md-8 d-flex align-items-center"},F=o("span",{class:"fas fa-chevron-down text-dark"},null,-1),J={class:"div mx-2 mb-0"},K={class:"mb-0 p-1"},Q={key:0,class:"div text-green"},X=o("p",{class:"m-0 p-0"},[o("b",null,"CLOSED")],-1),G={key:1,class:"div text-red m-0 p-0"},Z=o("p",{class:"m-0 p-0"},[o("b",null,"OPEN")],-1),tt={class:"div mx-3 mb-0 mr-auto"},et={class:"mb-0"},at={class:"col-12 col-md-2"},st={class:"div mx-3 mb-0"},ot={class:"mb-0 p-0"},nt={class:"col-12 col-md-2 text-light d-flex align-items-center justify-content-end"},lt=o("span",{class:"text-dark"},"See Details üêõ",-1);p();const rt=$(((t,e,r,i,c,u)=>{const d=l("Note");return a(),s(n,null,[o("div",Y,[o("div",W,[o("button",{class:"btn p-0 m-0 d-sm-none d-md-block",type:"button","data-toggle":"collapse","data-target":"#collapse"+r.bug.id,title:"Expand "+r.bug.title+" Details"},[F],8,["data-target","title"]),o("div",J,[o("h4",K,b(r.bug.title),1)]),r.bug.closed?(a(),s("div",Q,[X])):(a(),s("div",G,[Z])),o("div",tt,[o("h6",et,b(r.bug.description),1)])]),o("div",at,[o("div",st,[o("p",ot,[o("small",null," Updated "+b(i.updatedDate),1)])])]),o("div",nt,[o("p",{class:"m-0 pointer",title:"See Details for "+r.bug.title,onClick:e[1]||(e[1]=(...t)=>i.setActiveBug&&i.setActiveBug(...t))},[lt],8,["title"])])]),o("div",{class:"collapse",id:"collapse"+r.bug.id},[(a(!0),s(n,null,v(i.notes,(t=>(a(),s("div",{class:"row bg-light shadow mx-4 pb-3",key:t.id},[o(d,{note:t},null,8,["note"])])))),128))],8,["id"])],64)}));z.render=rt,z.__scopeId="data-v-6a6b2fa8";var it=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:z});const ct={setup(){const e=t({newBug:{}});return{state:e,async createBug(){try{const t=await L.createBug(e.newBug);e.newBug={},y("#createBugModal").modal("hide"),C.toast("Successfully Created","success"),await q.push({name:"BugDetails",params:{bugId:t}})}catch(t){C.toast(t,"error")}}}}},ut=f("data-v-4fddcdaa");g("data-v-4fddcdaa");const dt={class:"modal fade",id:"createBugModal",tabindex:"-1",role:"dialog","aria-labelledby":"modelTitleId","aria-hidden":"true"},gt={class:"modal-dialog",role:"document"},pt={class:"modal-content"},mt=o("div",{class:"modal-header"},[o("h5",{class:"modal-title"}," üêú Create Bug Report "),o("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[o("span",{"aria-hidden":"true"},"√ó")])],-1),bt={class:"modal-body"},vt={class:"form-group"},ft=o("small",{id:"inputBugTitle",class:"text-muted"},"Input Bug Title",-1),yt={class:"form-group"},ht=o("small",{id:"inputBugDescription",class:"text-muted"},"Input Bug Description",-1),Bt=o("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"}," Close ",-1),wt=o("button",{type:"submit",class:"btn btn-primary"}," Submit ",-1);p();const _t=ut(((t,e,n,l,r,i)=>(a(),s("div",dt,[o("div",gt,[o("div",pt,[mt,o("div",bt,[o("form",{onSubmit:e[3]||(e[3]=h(((...t)=>l.createBug&&l.createBug(...t)),["prevent"]))},[o("div",vt,[B(o("input",{type:"text",name:"title","onUpdate:modelValue":e[1]||(e[1]=t=>l.state.newBug.title=t),class:"form-control",placeholder:"Bug Title...","aria-describedby":"inputBugTitle",minlength:"3",maxlength:"50",required:""},null,512),[[w,l.state.newBug.title]]),ft]),o("div",yt,[B(o("input",{type:"text",name:"description","onUpdate:modelValue":e[2]||(e[2]=t=>l.state.newBug.description=t),class:"form-control text-break",placeholder:"Bug Description...","aria-describedby":"inputBugDescription",minlength:"3",maxlength:"50",required:""},null,512),[[w,l.state.newBug.description]]),ht]),Bt,wt],32)])])])]))));ct.render=_t,ct.__scopeId="data-v-4fddcdaa";var xt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ct});const It=new class{async createNote(t){const e=await j.post("api/notes",t);L.getNotesByBugId(e.data.bugId)}async deleteNote(t,e){await j.delete("api/notes/"+t),L.getNotesByBugId(e)}};const At={setup(){const e=_(),a=t({newNote:{bugId:e.params.bugId}});return{state:a,async createNote(){try{await It.createNote(a.newNote),a.newNote={bugId:e.params.bugId},C.toast("Successfully Created","success")}catch(t){C.toast(t,"error")}}}}},kt=f("data-v-324f17f6");g("data-v-324f17f6");const Tt={class:"form-group"},Nt=o("small",{id:"inputNoteBody",class:"text-muted"},"Input Note Description",-1),Et=o("button",{type:"submit",class:"btn btn-primary"}," Submit ",-1);p();const St=kt(((t,e,n,l,r,i)=>(a(),s("form",{onSubmit:e[2]||(e[2]=h(((...t)=>l.createNote&&l.createNote(...t)),["prevent"]))},[o("div",Tt,[B(o("input",{type:"text",name:"body","onUpdate:modelValue":e[1]||(e[1]=t=>l.state.newNote.body=t),class:"form-control text-break",placeholder:"Type New Note Here...","aria-describedby":"inputNoteBody",minlength:"3",maxlength:"50",required:""},null,512),[[w,l.state.newNote.body]]),Nt]),Et],32))));At.render=St,At.__scopeId="data-v-324f17f6";var Dt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:At});const Ct={setup(){const a=_(),s=t({newBug:{bugId:a.params.bugId}});return{activeBug:e((()=>T.activeBug)),state:s,async editBug(){try{await L.editBug(s.newBug,s.newBug.bugId),s.newBug={},y("#editBugModal").modal("hide"),C.toast("Successfully Edited","success")}catch(t){C.toast(t,"error")}}}}},Ot=f("data-v-da66d40e");g("data-v-da66d40e");const Pt={class:"modal fade",id:"editBugModal",tabindex:"-1",role:"dialog","aria-labelledby":"modelTitleId","aria-hidden":"true"},jt={class:"modal-dialog",role:"document"},Lt={class:"modal-content"},Ut=o("div",{class:"modal-header"},[o("h5",{class:"modal-title"}," üêú Edit Bug Report "),o("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[o("span",{"aria-hidden":"true"},"√ó")])],-1),Rt={class:"modal-body"},Mt={class:"form-group"},Vt=o("small",{id:"inputBugTitle",class:"text-muted"},"Input Bug Title",-1),Ht={class:"form-group"},qt=o("small",{id:"inputBugDescription",class:"text-muted"},"Input Bug Description",-1),zt=o("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"}," Close ",-1),$t=o("button",{type:"submit",class:"btn btn-primary"}," Submit ",-1);p();const Yt=Ot(((t,e,n,l,r,i)=>(a(),s("div",Pt,[o("div",jt,[o("div",Lt,[Ut,o("div",Rt,[o("form",{onSubmit:e[3]||(e[3]=h(((...t)=>l.editBug&&l.editBug(...t)),["prevent"]))},[o("div",Mt,[B(o("input",{type:"text",name:"title","onUpdate:modelValue":e[1]||(e[1]=t=>l.state.newBug.title=t),class:"form-control",placeholder:l.activeBug.title,"aria-describedby":"inputBugTitle",minlength:"3",maxlength:"50",required:""},null,8,["placeholder"]),[[w,l.state.newBug.title]]),Vt]),o("div",Ht,[B(o("input",{type:"text",name:"description","onUpdate:modelValue":e[2]||(e[2]=t=>l.state.newBug.description=t),class:"form-control  text-break",placeholder:l.activeBug.description,"aria-describedby":"inputBugDescription",minlength:"3",maxlength:"300",required:""},null,8,["placeholder"]),[[w,l.state.newBug.description]]),qt]),zt,$t],32)])])])]))));Ct.render=Yt,Ct.__scopeId="data-v-da66d40e";var Wt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ct});function Ft(t,e){if(O)console[t](`[${t}] :: ${(new Date).toLocaleTimeString()} :: `,...e);else{switch(t){case"log":case"assert":return}console[t](`[${t}] :: ${(new Date).toLocaleTimeString()} :: `,...e)}}const Jt={log(){Ft("log",arguments)},error(){Ft("error",arguments)},warn(){Ft("warn",arguments)},assert(){Ft("assert",arguments)},trace(){Ft("trace",arguments)}};const Kt=new class{async getAccount(){try{const t=await j.get("/account");T.account=t.data}catch(t){Jt.error("HAVE YOU STARTED YOUR SERVER YET???",t)}}},Qt=x({domain:"sc-codeworks.us.auth0.com",clientId:"ps5xsLNhpLA8J8KbsLEaQC3epbEfyE5J",audience:"https://BugLog.com",useRefreshTokens:!0,onRedirectCallback:t=>{q.push(t&&t.targetUrl?t.targetUrl:window.location.pathname)}});async function Xt(t){if(!Qt.isAuthenticated)return t;const e=1e3*Qt.identity.exp,a=e<Date.now(),s=e<Date.now()+432e5;return a?await Qt.loginWithPopup():s&&(await Qt.getTokenSilently(),j.defaults.headers.authorization=Qt.bearer),t}Qt.on(Qt.AUTH_EVENTS.AUTHENTICATED,(async function(){j.defaults.headers.authorization=Qt.bearer,j.interceptors.request.use(Xt),T.user=Qt.user,await Kt.getAccount()}));const Gt={setup:()=>({state:t({dropOpen:!1}),user:e((()=>T.user)),async login(){Qt.loginWithPopup()},async logout(){Qt.logout({returnTo:window.location.origin})}})},Zt=f("data-v-141f5148");g("data-v-141f5148");const te={class:"navbar navbar-expand-lg navbar-dark bg-dark"},ee=o("div",{class:"d-flex align-items-center"},[o("img",{class:"shadow",alt:"logo",src:"/assets/mantis.9be534d0.png",height:"80"}),o("h1",null,"Bug Log")],-1),ae=o("button",{class:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"},[o("span",{class:"navbar-toggler-icon"})],-1),se={class:"collapse navbar-collapse",id:"navbarText"},oe={class:"navbar-nav mr-auto"},ne={class:"nav-item"},le=I(" Home "),re={class:"nav-item"},ie=I(" About "),ce={class:"navbar-text"},ue={key:1,class:"dropdown"},de={class:"mx-3"},ge=o("div",{class:"list-group-item list-group-item-action hoverable"}," Account ",-1);p();const pe=Zt(((t,e,n,r,i,c)=>{const u=l("router-link");return a(),s("nav",te,[o(u,{class:"navbar-brand d-flex",to:{name:"Home"}},{default:Zt((()=>[ee])),_:1}),ae,o("div",se,[o("ul",oe,[o("li",ne,[o(u,{to:{name:"Home"},class:"nav-link"},{default:Zt((()=>[le])),_:1})]),o("li",re,[o(u,{to:{name:"About"},class:"nav-link"},{default:Zt((()=>[ie])),_:1})])]),o("span",ce,[r.user.isAuthenticated?(a(),s("div",ue,[o("div",{class:"dropdown-toggle",onClick:e[2]||(e[2]=t=>r.state.dropOpen=!r.state.dropOpen)},[o("img",{src:r.user.picture,alt:"user photo",height:"40",class:"rounded"},null,8,["src"]),o("span",de,b(r.user.name),1)]),o("div",{class:["dropdown-menu p-0 list-group w-100",{show:r.state.dropOpen}],onClick:e[4]||(e[4]=t=>r.state.dropOpen=!1)},[o(u,{to:{name:"Account"}},{default:Zt((()=>[ge])),_:1}),o("div",{class:"list-group-item list-group-item-action hoverable",onClick:e[3]||(e[3]=(...t)=>r.logout&&r.logout(...t))}," logout ")],2)])):(a(),s("button",{key:0,class:"btn btn-outline-primary text-uppercase",onClick:e[1]||(e[1]=(...t)=>r.login&&r.login(...t))}," Login "))])])])}));Gt.render=pe,Gt.__scopeId="data-v-141f5148";var me=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Gt});const be={props:{note:{type:Object,required:!0}},setup:t=>({account:e((()=>T.account)),activeBug:e((()=>T.activeBug)),async deleteNote(){if(await C.confirm())try{await It.deleteNote(t.note.id,t.note.bugId)}catch(e){C.toast(e,"error")}}})},ve=f("data-v-11bf1ec8");g("data-v-11bf1ec8");const fe={class:"col-12 d-flex align-items-center"},ye={key:0},he=o("span",{class:""},"X",-1),Be={class:"p-1 flex-grow-1 text-break"},we={class:"m-0 p-1"},_e={class:"my-0 mr-3 p-1 d-sm-none d-md-block"};p();const xe=ve(((t,e,n,l,r,i)=>(a(),s("div",fe,[l.account.id===n.note.creatorId?(a(),s("div",ye,[l.activeBug.closed?A("",!0):(a(),s("p",{key:0,class:"m-0 mr-2 p-1 pointer",title:"Delete Note",onClick:e[1]||(e[1]=(...t)=>l.deleteNote&&l.deleteNote(...t))},[he]))])):A("",!0),o("h6",Be,[o("b",null,b(n.note.body),1)]),o("p",we,[o("img",{class:"profile-img mr-3",src:n.note.creator.picture,alt:n.note.creator.name},null,8,["src","alt"])]),o("p",_e,[o("b",null,b(n.note.creator.name),1)])]))));be.render=xe,be.__scopeId="data-v-11bf1ec8";var Ie=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:be});const Ae=k(N);!function(t){const e={"./components/Bug.vue":it,"./components/CreateBugModal.vue":xt,"./components/CreateNoteForm.vue":Dt,"./components/EditBugModal.vue":Wt,"./components/Navbar.vue":me,"./components/Note.vue":Ie};Object.entries(e).forEach((([e,a])=>{const s=a.name||e.substr(e.lastIndexOf("/")+1).replace(/\.\w+$/,"");t.component(s,a.default)}))}(Ae),Ae.use(q).mount("#app");export{T as A,C as P,L as b};
